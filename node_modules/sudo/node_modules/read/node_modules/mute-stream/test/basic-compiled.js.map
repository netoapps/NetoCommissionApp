{"version":3,"sources":["basic.js"],"names":[],"mappings":"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","file":"basic-compiled.js","sourcesContent":["var Stream = require('stream')\nvar tap = require('tap')\nvar MS = require('../mute.js')\n\n// some marker objects\nvar END = {}\nvar PAUSE = {}\nvar RESUME = {}\n\nfunction PassThrough () {\n  Stream.call(this)\n  this.readable = this.writable = true\n}\n\nPassThrough.prototype = Object.create(Stream.prototype, {\n  constructor: {\n    value: PassThrough\n  },\n  write: {\n    value: function (c) {\n      this.emit('data', c)\n      return true\n    }\n  },\n  end: {\n    value: function (c) {\n      if (c) this.write(c)\n      this.emit('end')\n    }\n  },\n  pause: {\n    value: function () {\n      this.emit('pause')\n    }\n  },\n  resume: {\n    value: function () {\n      this.emit('resume')\n    }\n  }\n})\n\ntap.test('incoming', function (t) {\n  var ms = new MS\n  var str = new PassThrough\n  str.pipe(ms)\n\n  var expect = ['foo', 'boo', END]\n  ms.on('data', function (c) {\n    t.equal(c, expect.shift())\n  })\n  ms.on('end', function () {\n    t.equal(END, expect.shift())\n    t.end()\n  })\n  str.write('foo')\n  ms.mute()\n  str.write('bar')\n  ms.unmute()\n  str.write('boo')\n  ms.mute()\n  str.write('blaz')\n  str.end('grelb')\n})\n\ntap.test('outgoing', function (t) {\n  var ms = new MS\n  var str = new PassThrough\n  ms.pipe(str)\n\n  var expect = ['foo', 'boo', END]\n  str.on('data', function (c) {\n    t.equal(c, expect.shift())\n  })\n  str.on('end', function () {\n    t.equal(END, expect.shift())\n    t.end()\n  })\n\n  ms.write('foo')\n  ms.mute()\n  ms.write('bar')\n  ms.unmute()\n  ms.write('boo')\n  ms.mute()\n  ms.write('blaz')\n  ms.end('grelb')\n})\n\ntap.test('isTTY', function (t) {\n  var str = new PassThrough\n  str.isTTY = true\n  str.columns=80\n  str.rows=24\n\n  var ms = new MS\n  t.equal(ms.isTTY, false)\n  t.equal(ms.columns, undefined)\n  t.equal(ms.rows, undefined)\n  ms.pipe(str)\n  t.equal(ms.isTTY, true)\n  t.equal(ms.columns, 80)\n  t.equal(ms.rows, 24)\n  str.isTTY = false\n  t.equal(ms.isTTY, false)\n  t.equal(ms.columns, 80)\n  t.equal(ms.rows, 24)\n  str.isTTY = true\n  t.equal(ms.isTTY, true)\n  t.equal(ms.columns, 80)\n  t.equal(ms.rows, 24)\n  ms.isTTY = false\n  t.equal(ms.isTTY, false)\n  t.equal(ms.columns, 80)\n  t.equal(ms.rows, 24)\n\n  ms = new MS\n  t.equal(ms.isTTY, false)\n  str.pipe(ms)\n  t.equal(ms.isTTY, true)\n  str.isTTY = false\n  t.equal(ms.isTTY, false)\n  str.isTTY = true\n  t.equal(ms.isTTY, true)\n  ms.isTTY = false\n  t.equal(ms.isTTY, false)\n\n  t.end()\n})\n\ntap.test('pause/resume incoming', function (t) {\n  var str = new PassThrough\n  var ms = new MS\n  str.on('pause', function () {\n    t.equal(PAUSE, expect.shift())\n  })\n  str.on('resume', function () {\n    t.equal(RESUME, expect.shift())\n  })\n  var expect = [PAUSE, RESUME, PAUSE, RESUME]\n  str.pipe(ms)\n  ms.pause()\n  ms.resume()\n  ms.pause()\n  ms.resume()\n  t.equal(expect.length, 0, 'saw all events')\n  t.end()\n})\n\ntap.test('replace with *', function (t) {\n  var str = new PassThrough\n  var ms = new MS({replace: '*'})\n  str.pipe(ms)\n  var expect = ['foo', '*****', 'bar', '***', 'baz', 'boo', '**', '****']\n\n  ms.on('data', function (c) {\n    t.equal(c, expect.shift())\n  })\n\n  str.write('foo')\n  ms.mute()\n  str.write('12345')\n  ms.unmute()\n  str.write('bar')\n  ms.mute()\n  str.write('baz')\n  ms.unmute()\n  str.write('baz')\n  str.write('boo')\n  ms.mute()\n  str.write('xy')\n  str.write('xyzΩ')\n\n  t.equal(expect.length, 0)\n  t.end()\n})\n\ntap.test('replace with ~YARG~', function (t) {\n  var str = new PassThrough\n  var ms = new MS({replace: '~YARG~'})\n  str.pipe(ms)\n  var expect = ['foo', '~YARG~~YARG~~YARG~~YARG~~YARG~', 'bar',\n                '~YARG~~YARG~~YARG~', 'baz', 'boo', '~YARG~~YARG~',\n                '~YARG~~YARG~~YARG~~YARG~']\n\n  ms.on('data', function (c) {\n    t.equal(c, expect.shift())\n  })\n\n  // also throw some unicode in there, just for good measure.\n  str.write('foo')\n  ms.mute()\n  str.write('ΩΩ')\n  ms.unmute()\n  str.write('bar')\n  ms.mute()\n  str.write('Ω')\n  ms.unmute()\n  str.write('baz')\n  str.write('boo')\n  ms.mute()\n  str.write('Ω')\n  str.write('ΩΩ')\n\n  t.equal(expect.length, 0)\n  t.end()\n})\n"]}