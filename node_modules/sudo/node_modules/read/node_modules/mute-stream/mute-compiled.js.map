{"version":3,"sources":["mute.js"],"names":[],"mappings":"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","file":"mute-compiled.js","sourcesContent":["var Stream = require('stream')\n\nmodule.exports = MuteStream\n\n// var out = new MuteStream(process.stdout)\n// argument auto-pipes\nfunction MuteStream (opts) {\n  Stream.apply(this)\n  opts = opts || {}\n  this.writable = this.readable = true\n  this.muted = false\n  this.on('pipe', this._onpipe)\n  this.replace = opts.replace\n\n  // For readline-type situations\n  // This much at the start of a line being redrawn after a ctrl char\n  // is seen (such as backspace) won't be redrawn as the replacement\n  this._prompt = opts.prompt || null\n  this._hadControl = false\n}\n\nMuteStream.prototype = Object.create(Stream.prototype)\n\nObject.defineProperty(MuteStream.prototype, 'constructor', {\n  value: MuteStream,\n  enumerable: false\n})\n\nMuteStream.prototype.mute = function () {\n  this.muted = true\n}\n\nMuteStream.prototype.unmute = function () {\n  this.muted = false\n}\n\nObject.defineProperty(MuteStream.prototype, '_onpipe', {\n  value: onPipe,\n  enumerable: false,\n  writable: true,\n  configurable: true\n})\n\nfunction onPipe (src) {\n  this._src = src\n}\n\nObject.defineProperty(MuteStream.prototype, 'isTTY', {\n  get: getIsTTY,\n  set: setIsTTY,\n  enumerable: true,\n  configurable: true\n})\n\nfunction getIsTTY () {\n  return( (this._dest) ? this._dest.isTTY\n        : (this._src) ? this._src.isTTY\n        : false\n        )\n}\n\n// basically just get replace the getter/setter with a regular value\nfunction setIsTTY (isTTY) {\n  Object.defineProperty(this, 'isTTY', {\n    value: isTTY,\n    enumerable: true,\n    writable: true,\n    configurable: true\n  })\n}\n\nObject.defineProperty(MuteStream.prototype, 'rows', {\n  get: function () {\n    return( this._dest ? this._dest.rows\n          : this._src ? this._src.rows\n          : undefined )\n  }, enumerable: true, configurable: true })\n\nObject.defineProperty(MuteStream.prototype, 'columns', {\n  get: function () {\n    return( this._dest ? this._dest.columns\n          : this._src ? this._src.columns\n          : undefined )\n  }, enumerable: true, configurable: true })\n\n\nMuteStream.prototype.pipe = function (dest, options) {\n  this._dest = dest\n  return Stream.prototype.pipe.call(this, dest, options)\n}\n\nMuteStream.prototype.pause = function () {\n  if (this._src) return this._src.pause()\n}\n\nMuteStream.prototype.resume = function () {\n  if (this._src) return this._src.resume()\n}\n\nMuteStream.prototype.write = function (c) {\n  if (this.muted) {\n    if (!this.replace) return true\n    if (c.match(/^\\u001b/)) {\n      if(c.indexOf(this._prompt) === 0) {\n        c = c.substr(this._prompt.length);\n        c = c.replace(/./g, this.replace);\n        c = this._prompt + c;\n      }\n      this._hadControl = true\n      return this.emit('data', c)\n    } else {\n      if (this._prompt && this._hadControl &&\n          c.indexOf(this._prompt) === 0) {\n        this._hadControl = false\n        this.emit('data', this._prompt)\n        c = c.substr(this._prompt.length)\n      }\n      c = c.toString().replace(/./g, this.replace)\n    }\n  }\n  this.emit('data', c)\n}\n\nMuteStream.prototype.end = function (c) {\n  if (this.muted) {\n    if (c && this.replace) {\n      c = c.toString().replace(/./g, this.replace)\n    } else {\n      c = null\n    }\n  }\n  if (c) this.emit('data', c)\n  this.emit('end')\n}\n\nfunction proxy (fn) { return function () {\n  var d = this._dest\n  var s = this._src\n  if (d && d[fn]) d[fn].apply(d, arguments)\n  if (s && s[fn]) s[fn].apply(s, arguments)\n}}\n\nMuteStream.prototype.destroy = proxy('destroy')\nMuteStream.prototype.destroySoon = proxy('destroySoon')\nMuteStream.prototype.close = proxy('close')\n"]}